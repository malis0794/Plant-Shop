{"ast":null,"code":"var _jsxFileName = \"/Users/ali/Documents/bootcamp/Plant-Shop/src/contexts/checkout.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useReducer, createContext, useEffect } from \"react\";\nimport useLocalStorage from \"hooks/useLocalStorage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CHECKOUT_STEPS = {\n  AUTH: \"auth\",\n  SHIPPING: \"shipping\",\n  PAYMENT: \"payment\"\n};\nconst initialState = {\n  step: CHECKOUT_STEPS.AUTH,\n  shippingAddress: null\n};\nexport const CheckoutStateContext = /*#__PURE__*/createContext();\nexport const CheckoutDispatchContext = /*#__PURE__*/createContext();\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"SET_CHECKOUT_STEP\":\n      return { ...state,\n        step: action.payload.step\n      };\n\n    case \"SET_SHIPPING_ADDRESS\":\n      return { ...state,\n        shippingAddress: action.payload.shippingAddress\n      };\n\n    default:\n      throw new Error(`Unknown action: ${action.type}`);\n  }\n};\n\nconst CheckoutProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [checkoutState, setCheckoutState] = useLocalStorage(\"checkout\", null);\n  const persistedCheckoutState = { ...initialState,\n    shippingAddress: checkoutState || {}\n  };\n  const [state, dispatch] = useReducer(reducer, persistedCheckoutState);\n  useEffect(() => {\n    setCheckoutState(state.shippingAddress);\n  }, [state.shippingAddress]);\n  return /*#__PURE__*/_jsxDEV(CheckoutDispatchContext.Provider, {\n    value: dispatch,\n    children: /*#__PURE__*/_jsxDEV(CheckoutStateContext.Provider, {\n      value: state,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CheckoutProvider, \"gSVTdkSpM10RgK2iIUAf4RgD2lk=\", false, function () {\n  return [useLocalStorage];\n});\n\n_c = CheckoutProvider;\nexport const setCheckoutStep = (dispatch, step) => {\n  return dispatch({\n    type: \"SET_CHECKOUT_STEP\",\n    payload: {\n      step\n    }\n  });\n};\nexport const saveShippingAddress = (dispatch, shippingAddress) => {\n  dispatch({\n    type: \"SET_SHIPPING_ADDRESS\",\n    payload: {\n      shippingAddress\n    }\n  });\n  return setCheckoutStep(dispatch, CHECKOUT_STEPS.PAYMENT);\n};\nexport default CheckoutProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"CheckoutProvider\");","map":{"version":3,"sources":["/Users/ali/Documents/bootcamp/Plant-Shop/src/contexts/checkout.jsx"],"names":["React","useReducer","createContext","useEffect","useLocalStorage","CHECKOUT_STEPS","AUTH","SHIPPING","PAYMENT","initialState","step","shippingAddress","CheckoutStateContext","CheckoutDispatchContext","reducer","state","action","type","payload","Error","CheckoutProvider","children","checkoutState","setCheckoutState","persistedCheckoutState","dispatch","setCheckoutStep","saveShippingAddress"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,aAA5B,EAA2CC,SAA3C,QAA4D,OAA5D;AACA,OAAOC,eAAP,MAA4B,uBAA5B;;AAEA,OAAO,MAAMC,cAAc,GAAG;AAC5BC,EAAAA,IAAI,EAAE,MADsB;AAE5BC,EAAAA,QAAQ,EAAE,UAFkB;AAG5BC,EAAAA,OAAO,EAAE;AAHmB,CAAvB;AAMP,MAAMC,YAAY,GAAG;AACnBC,EAAAA,IAAI,EAAEL,cAAc,CAACC,IADF;AAEnBK,EAAAA,eAAe,EAAE;AAFE,CAArB;AAKA,OAAO,MAAMC,oBAAoB,gBAAGV,aAAa,EAA1C;AACP,OAAO,MAAMW,uBAAuB,gBAAGX,aAAa,EAA7C;;AAEP,MAAMY,OAAO,GAAG,CAACC,KAAD,EAAQC,MAAR,KAAmB;AACjC,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,mBAAL;AACE,aAAO,EACL,GAAGF,KADE;AAELL,QAAAA,IAAI,EAAEM,MAAM,CAACE,OAAP,CAAeR;AAFhB,OAAP;;AAIF,SAAK,sBAAL;AACE,aAAO,EACL,GAAGK,KADE;AAELJ,QAAAA,eAAe,EAAEK,MAAM,CAACE,OAAP,CAAeP;AAF3B,OAAP;;AAIF;AACE,YAAM,IAAIQ,KAAJ,CAAW,mBAAkBH,MAAM,CAACC,IAAK,EAAzC,CAAN;AAZJ;AAcD,CAfD;;AAiBA,MAAMG,gBAAgB,GAAG,QAAkB;AAAA;;AAAA,MAAjB;AAAEC,IAAAA;AAAF,GAAiB;AACzC,QAAM,CAACC,aAAD,EAAgBC,gBAAhB,IAAoCnB,eAAe,CAAC,UAAD,EAAa,IAAb,CAAzD;AACA,QAAMoB,sBAAsB,GAAG,EAC7B,GAAGf,YAD0B;AAE7BE,IAAAA,eAAe,EAAEW,aAAa,IAAI;AAFL,GAA/B;AAIA,QAAM,CAACP,KAAD,EAAQU,QAAR,IAAoBxB,UAAU,CAACa,OAAD,EAAUU,sBAAV,CAApC;AAEArB,EAAAA,SAAS,CAAC,MAAM;AACdoB,IAAAA,gBAAgB,CAACR,KAAK,CAACJ,eAAP,CAAhB;AACD,GAFQ,EAEN,CAACI,KAAK,CAACJ,eAAP,CAFM,CAAT;AAGA,sBACE,QAAC,uBAAD,CAAyB,QAAzB;AAAkC,IAAA,KAAK,EAAEc,QAAzC;AAAA,2BACE,QAAC,oBAAD,CAAsB,QAAtB;AAA+B,MAAA,KAAK,EAAEV,KAAtC;AAAA,gBACGM;AADH;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAOD,CAlBD;;GAAMD,gB;UACsChB,e;;;KADtCgB,gB;AAoBN,OAAO,MAAMM,eAAe,GAAG,CAACD,QAAD,EAAWf,IAAX,KAAoB;AACjD,SAAOe,QAAQ,CAAC;AACdR,IAAAA,IAAI,EAAE,mBADQ;AAEdC,IAAAA,OAAO,EAAE;AACPR,MAAAA;AADO;AAFK,GAAD,CAAf;AAMD,CAPM;AASP,OAAO,MAAMiB,mBAAmB,GAAG,CAACF,QAAD,EAAWd,eAAX,KAA+B;AAChEc,EAAAA,QAAQ,CAAC;AACPR,IAAAA,IAAI,EAAE,sBADC;AAEPC,IAAAA,OAAO,EAAE;AACPP,MAAAA;AADO;AAFF,GAAD,CAAR;AAMA,SAAOe,eAAe,CAACD,QAAD,EAAWpB,cAAc,CAACG,OAA1B,CAAtB;AACD,CARM;AAUP,eAAeY,gBAAf","sourcesContent":["import React, { useReducer, createContext, useEffect } from \"react\";\nimport useLocalStorage from \"hooks/useLocalStorage\";\n\nexport const CHECKOUT_STEPS = {\n  AUTH: \"auth\",\n  SHIPPING: \"shipping\",\n  PAYMENT: \"payment\"\n};\n\nconst initialState = {\n  step: CHECKOUT_STEPS.AUTH,\n  shippingAddress: null\n};\n\nexport const CheckoutStateContext = createContext();\nexport const CheckoutDispatchContext = createContext();\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"SET_CHECKOUT_STEP\":\n      return {\n        ...state,\n        step: action.payload.step\n      };\n    case \"SET_SHIPPING_ADDRESS\":\n      return {\n        ...state,\n        shippingAddress: action.payload.shippingAddress\n      };\n    default:\n      throw new Error(`Unknown action: ${action.type}`);\n  }\n};\n\nconst CheckoutProvider = ({ children }) => {\n  const [checkoutState, setCheckoutState] = useLocalStorage(\"checkout\", null);\n  const persistedCheckoutState = {\n    ...initialState,\n    shippingAddress: checkoutState || {}\n  };\n  const [state, dispatch] = useReducer(reducer, persistedCheckoutState);\n\n  useEffect(() => {\n    setCheckoutState(state.shippingAddress);\n  }, [state.shippingAddress]);\n  return (\n    <CheckoutDispatchContext.Provider value={dispatch}>\n      <CheckoutStateContext.Provider value={state}>\n        {children}\n      </CheckoutStateContext.Provider>\n    </CheckoutDispatchContext.Provider>\n  );\n};\n\nexport const setCheckoutStep = (dispatch, step) => {\n  return dispatch({\n    type: \"SET_CHECKOUT_STEP\",\n    payload: {\n      step\n    }\n  });\n};\n\nexport const saveShippingAddress = (dispatch, shippingAddress) => {\n  dispatch({\n    type: \"SET_SHIPPING_ADDRESS\",\n    payload: {\n      shippingAddress\n    }\n  });\n  return setCheckoutStep(dispatch, CHECKOUT_STEPS.PAYMENT);\n};\n\nexport default CheckoutProvider;\n"]},"metadata":{},"sourceType":"module"}